.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_gettingstarted_gallery_auto_examples_nddataset_plot_create_dataset.py>`     to download the full example code
    .. rst-class:: sphx-glr-example-title

    .. _sphx_glr_gettingstarted_gallery_auto_examples_nddataset_plot_create_dataset.py:


NDDataset creation and plotting example
=======================================
In this example, we create a 3D NDDataset from scratch,
and then we plot one section (a 2D plane)

As usual, we start by loading the spectrochempy library


.. code-block:: default

    import spectrochempy as scp
    import numpy as np








Creation
------------------------------------------------------------------
Now we will create a 3D NDDataset from scratch

Data
++++++
here we make use of numpy array functions to create the data for coordinates
axis and the array of data


.. code-block:: default

    c0 = np.linspace(200.0, 300.0, 3)
    c1 = np.linspace(0.0, 60.0, 100)
    c2 = np.linspace(4000.0, 1000.0, 100)
    nd_data = np.array(
        [
            np.array([np.sin(2.0 * np.pi * c2 / 4000.0) * np.exp(-y / 60) for y in c1]) * t
            for t in c0
        ]
    )








Coordinates
+++++++++++
The `Coord` object allow making an array of coordinates
with additional metadata such as units, labels, title, etc


.. code-block:: default

    coord0 = scp.Coord(
        data=c0, labels=["cold", "normal", "hot"], units="K", title="temperature"
    )
    coord1 = scp.Coord(data=c1, labels=None, units="minutes", title="time-on-stream")
    coord2 = scp.Coord(data=c2, labels=None, units="cm^-1", title="wavenumber")








Labels can be useful for instance for indexing


.. code-block:: default

    a = coord0["normal"]
    print(a)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Coord: [float64] K (size: 1)




nd-Dataset
+++++++++++
The |NDDataset| object allow making the array of data with units, etc...


.. code-block:: default

    mydataset = scp.NDDataset(
        nd_data, coordset=[coord0, coord1, coord2], title="Absorbance", units="absorbance"
    )
    mydataset.description = """Dataset example created for this tutorial.
    It's a 3-D dataset (with dimensionless intensity: absorbance )"""
    mydataset.name = "An example from scratch"
    mydataset.author = "Blake and Mortimer"
    print(mydataset)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    NDDataset: [float64] a.u. (shape: (z:3, y:100, x:100))




We want to plot a section of this 3D NDDataset:

NDDataset can be sliced like conventional numpy-array...


.. code-block:: default

    new = mydataset[..., 0]








or maybe more conveniently in this case, using an axis labels:


.. code-block:: default

    new = mydataset["hot"]








To plot a dataset, use the `plot` command (generic plot).
As the section NDDataset is 2D, a contour plot is displayed by default.


.. code-block:: default

    new.plot()




.. image:: /gettingstarted/gallery/auto_examples/nddataset/images/sphx_glr_plot_create_dataset_001.png
    :alt: plot create dataset
    :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    <_AxesSubplot:xlabel='wavenumber $\\mathrm{/\\ \\mathrm{cm}^{-1}}$', ylabel='Absorbance $\\mathrm{/\\ \\mathrm{a.u.}}$'>



But it is possible to display image

sphinx_gallery_thumbnail_number = 2


.. code-block:: default

    new.plot(method="image")




.. image:: /gettingstarted/gallery/auto_examples/nddataset/images/sphx_glr_plot_create_dataset_002.png
    :alt: plot create dataset
    :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    <_AxesSubplot:xlabel='wavenumber $\\mathrm{/\\ \\mathrm{cm}^{-1}}$', ylabel='time-on-stream $\\mathrm{/\\ \\mathrm{min}}$'>



or stacked plot


.. code-block:: default

    new.plot(method="stack")




.. image:: /gettingstarted/gallery/auto_examples/nddataset/images/sphx_glr_plot_create_dataset_003.png
    :alt: plot create dataset
    :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    <_AxesSubplot:xlabel='wavenumber $\\mathrm{/\\ \\mathrm{cm}^{-1}}$', ylabel='Absorbance $\\mathrm{/\\ \\mathrm{a.u.}}$'>



Note that the scp allows one to use this syntax too:


.. code-block:: default

    scp.plot_stack(new)

    # scp.show()  # uncomment to show plot if needed (not necessary in jupyter notebook)



.. image:: /gettingstarted/gallery/auto_examples/nddataset/images/sphx_glr_plot_create_dataset_004.png
    :alt: plot create dataset
    :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    <_AxesSubplot:xlabel='wavenumber $\\mathrm{/\\ \\mathrm{cm}^{-1}}$', ylabel='Absorbance $\\mathrm{/\\ \\mathrm{a.u.}}$'>




.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  1.981 seconds)


.. _sphx_glr_download_gettingstarted_gallery_auto_examples_nddataset_plot_create_dataset.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_create_dataset.py <plot_create_dataset.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_create_dataset.ipynb <plot_create_dataset.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
